@model Tuple<IEnumerable<P50_4_22.Models.CatalogProduct>, IEnumerable<P50_4_22.Models.Brand>>

@{
    ViewBag.Title = "Панель администратора";
}

<div class="admin-container">
    <!-- Таблица продуктов -->
    <div class="table-section">
        <h2>Продукты</h2>
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Название продукта</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2">
                        <button class="action-button create" onclick="showAddProductModal()">Добавить продукт</button>
                    </td>
                </tr>
                @foreach (var item in Model.Item1) // CatalogProduct
                {
                    <tr>
                        <td>@item.ProductName</td>
                        <td class="actions">
                            <a asp-action="Details" asp-controller="CRUDController" asp-route-id="@item.IdCatalogproducts" class="action-link details">Подробнее</a>
                            <a asp-action="Edit" asp-controller="CRUDController" asp-route-id="@item.IdCatalogproducts" class="action-link edit">Изменить</a>
                            <a asp-action="Delete" asp-controller="CRUDController" asp-route-id="@item.IdCatalogproducts" class="action-link delete">Удалить</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Таблица брендов -->
    <div class="table-section">
        <h2>Бренды</h2>
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Название бренда</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="2">
                        <a asp-action="Create" asp-controller="CRUDController" class="action-link create">Добавить бренд</a>
                    </td>
                </tr>
                @foreach (var item in Model.Item2) // Brand
                {
                    <tr>
                        <td>@item.Brand1</td>
                        <td class="actions">
                            <a asp-action="Details" asp-controller="CRUDController" asp-route-id="@item.IdBrands" class="action-link details">Подробнее</a>
                            <a asp-action="Edit" asp-controller="CRUDController" asp-route-id="@item.IdBrands" class="action-link edit">Изменить</a>
                            <a asp-action="Delete" asp-controller="CRUDController" asp-route-id="@item.IdBrands" class="action-link delete">Удалить</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Модальное окно для добавления продукта -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddProductModal()">×</span>
            <h3>Добавить новый продукт</h3>
            <form asp-action="Create" asp-controller="CRUD" method="post" class="form-content">
                <div class="form-group">
                    <label for="ProductName" class="form-label">Название продукта</label>
                    <input id="ProductName" name="ProductName" class="form-input" required placeholder="Введите название продукта" />
                </div>

                <div class="form-group">
                    <label for="PriceOfProduct" class="form-label">Цена продукта</label>
                    <input id="PriceOfProduct" name="PriceOfProduct" type="number" class="form-input" required placeholder="Введите цену" />
                </div>

                <div class="form-group">
                    <label for="DescriptionProduct" class="form-label">Описание продукта</label>
                    <input id="DescriptionProduct" name="DescriptionProduct" class="form-input" required placeholder="Введите описание" />
                </div>

                <div class="form-group">
                    <label for="Img" class="form-label">URL картинки</label>
                    <input id="Img" name="Img" class="form-input" required placeholder="Введите URL изображения" />
                </div>

                <div class="form-group">
                    <label for="BrandsId" class="form-label">ID бренда</label>
                    <input id="BrandsId" name="BrandsId" type="number" class="form-input" required placeholder="Введите ID бренда" />
                </div>

                <div class="form-group">
                    <label for="CategoriesId" class="form-label">ID категории</label>
                    <input id="CategoriesId" name="CategoriesId" type="number" class="form-input" required placeholder="Введите ID категории" />
                </div>

                <button type="submit" class="login-button">Отправить</button>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="~/css/admin-panel.css" />
    <partial name="_ValidationScriptsPartial" />
    <script>
        function showAddProductModal() {
            document.getElementById("addProductModal").style.display = "block";
            document.body.style.overflow = "hidden"; // Отключаем прокрутку основной страницы
        }

        function closeAddProductModal() {
            document.getElementById("addProductModal").style.display = "none";
            document.body.style.overflow = "auto"; // Включаем прокрутку обратно
        }

        window.onclick = function (event) {
            const modal = document.getElementById("addProductModal");
            if (event.target == modal) {
                modal.style.display = "none";
                document.body.style.overflow = "auto"; // Включаем прокрутку при закрытии
            }
        }
    </script>
}